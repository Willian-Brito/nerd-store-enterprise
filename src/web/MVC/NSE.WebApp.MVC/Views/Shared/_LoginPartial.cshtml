
@using Microsoft.AspNetCore.Mvc.TagHelpers
@using NSE.Security.Identity.User
@using NSE.WebApp.MVC.Extensions.Helpers
@inject IAspNetUser AppUser

@if (AppUser.IsAuthenticated())
{
    <div>
        <vc:shopping-cart/>
    </div>
    <div>
        <div class="dropdown d-inline-block">
            <a href="#" class="dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                <img class="icon icon-sm rounded-circle"
                     src="https://s.gravatar.com/avatar/@(this.HashEmailForGravatar(AppUser.GetUserEmail()))?d=mm&s=45">
            </a>

            <ul class="dropdown-menu dropdown-menu-end">
                <li><a class="dropdown-item" href="#">My Profile</a></li>
                <li><a class="dropdown-item" asp-controller="Order" asp-action="MyOrders">My Orders</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" asp-controller="Identity" asp-action="Logout">Sign out</a></li>
            </ul>
        </div>
    </div>
}
else
{
    <div class="widget-header">
        <small class="title text-muted">Welcome!</small>
        <div>
            <a asp-controller="Identity" asp-action="Register">Create account</a> <span> | </span>
            <a asp-controller="Identity" asp-action="Login"> Sign In</a>
        </div>
    </div>
}